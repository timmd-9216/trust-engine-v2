---
editor_options:
  markdown:
    wrap: 72
---

# Candidate Summary Reports

This README documents the **candidate summary reports** generated by
`read_json_folder.py`. The YAML file (`config/<country>.yaml`) is the
**single source of truth** for candidate identity and platform handles.

------------------------------------------------------------------------

## Usage

### Single platform

```bash
python3 -m src.data_analysis.read_json_folder \
  --bucket <bucket> \
  --country <country> \
  --platform twitter|instagram|youtube \
  --config-dir ./config \
  --out-csv ./out
```

### Multiple platforms

All:

```bash
python3 -m src.data_analysis.read_json_folder \
  --bucket <bucket> \
  --country <country> \
  --platform all \
  --config-dir ./config \
  --out-csv ./out
```

Subset:

```bash
python3 -m src.data_analysis.read_json_folder \
  --bucket <bucket> \
  --country <country> \
  --platform twitter,instagram \
  --config-dir ./config \
  --out-csv ./out
```

Each platform runs sequentially and produces one CSV per platform.

------------------------------------------------------------------------

## Outputs

```text
out/<country>/twitter/reports/candidate_summary.csv
out/<country>/instagram/reports/candidate_summary_instagram.csv
out/<country>/youtube/reports/candidate_summary_youtube.csv
```

------------------------------------------------------------------------

## Data Sources

Each platform uses **two distinct data sources**, which are never mixed:

- **Home JSONs**: platform exports under `raw/<country>/<platform>/*.json`
  that contain the candidate's own posts.
- **Candidate subfolder JSONs**: interaction data under
  `raw/<country>/<platform>/<candidate_id>/*.json` used for engagement
  and interaction metrics.

------------------------------------------------------------------------

## Columns

### Twitter

| Column                | Description                                                                                                                      |
|-----------------------|----------------------------------------------------------------------------------------------------------------------------------|
| `candidate`           | Candidate ID (YAML `candidate_id`).                                                                                              |
| `candidate_name`      | Candidate name (YAML `name`).                                                                                                    |
| `twitter_username`    | Official handle (YAML `twitter_username`).                                                                                        |
| `own_posts_raw`       | **Count of tweet objects** found in home JSONs `raw/<country>/twitter/*.json` whose **filename contains** `candidate_id`.       |
| `own_posts`           | **Count of tweet objects** from `own_posts_raw` where the **author username matches** `twitter_username`.                        |
| `own_posts_retrieved` | **Count of JSON files** under `raw/<country>/twitter/<candidate_id>/` (interaction/engagement export files).                     |
| `items`               | **Count of interaction items** loaded from all JSONs under `raw/<country>/twitter/<candidate_id>/` (one row per tweet item).     |
| `tweets`              | **Count of items** classified as original tweets (non-reply, non-retweet, non-quote).                                            |
| `replies`             | **Count of items** classified as replies.                                                                                         |
| `retweets`            | **Count of items** classified as retweets.                                                                                        |
| `quotes`              | **Count of items** classified as quote tweets.                                                                                   |
| `media_items`         | **Count of items** that include media (e.g., photos/videos/GIFs or a non-empty media/entities attachment field).                 |
| `sum_reply_count`     | **Sum over items** of the numeric field `reply_count` (missing/null treated as 0).                                               |
| `sum_retweet_count`   | **Sum over items** of the numeric field `retweet_count` (missing/null treated as 0).                                             |
| `sum_quote_count`     | **Sum over items** of the numeric field `quote_count` (missing/null treated as 0).                                               |
| `sum_favorite_count`  | **Sum over items** of the numeric field `favorite_count` (missing/null treated as 0).                                           |

#### How counts vs. sums work (Twitter)

- **Counts** (`own_posts_raw`, `own_posts`, `items`, `tweets`, `replies`, `retweets`, `quotes`, `media_items`) are **row counts**:
  each matching tweet object increments the counter by **1**.
- **Sums** (`sum_reply_count`, `sum_retweet_count`, `sum_quote_count`, `sum_favorite_count`) are **additive totals** of the
  corresponding per-tweet numeric fields across the relevant items.
  - If a tweet item is missing a field (or it is null/empty), it contributes **0** to the sum.
  - These are **not** sums of identifiers (e.g., `conversation_id`)â€”IDs are used for linking/deduping logic, not aggregation.

Example: if three items have `reply_count` values `[2, 0, 5]`, then `sum_reply_count = 7`.

### Instagram

| Column                    | Description                                                                       |
|---------------------------|-----------------------------------------------------------------------------------|
| `candidate`               | Candidate ID (YAML `candidate_id`)                                                |
| `candidate_name`          | Candidate name (YAML `name`)                                                      |
| `instagram_username`      | Official username (YAML `instagram_username`)                                     |
| `own_posts_raw`           | Posts in `raw/<country>/instagram/*.json` with filename containing `candidate_id` |
| `own_posts`               | Posts authored by `instagram_username`                                            |
| `own_posts_retrieved`     | Number of JSON files in `raw/<country>/instagram/<candidate_id>/`                 |
| `items`                   | Total comments from candidate subfolder JSONs                                     |
| `unique_users`            | Distinct commenter usernames                                                      |
| `sum_child_comment_count` | Sum of `child_comment_count`                                                      |
| `sum_comment_like_count`  | Sum of `comment_like_count`                                                       |
| `sum_post_like_count`     | Sum of `like_count` across home posts                                             |
| `sum_post_comment_count`  | Sum of `comment_count` across home posts                                          |

### YouTube

| Column                 | Description                                                     |
|------------------------|-----------------------------------------------------------------|
| `candidate`            | Candidate ID (YAML `candidate_id`)                              |
| `candidate_name`       | Candidate name (YAML `name`)                                    |
| `youtube_channel_id`   | Official channel ID (YAML `youtube_channel_id`)                 |
| `videos`               | Total videos across `raw/<country>/youtube/<candidate_id>/*.json` |
| `videos_own`           | Videos where `item.channel_id == youtube_channel_id`            |
| `own_posts_retrieved`  | Number of JSON files in `raw/<country>/youtube/<candidate_id>/` |
| `unique_channels`      | Distinct `channel_id` values                                    |
| `sum_view_count`       | Sum of `view_count`                                             |
| `sum_like_count`       | Sum of `like_count`                                             |
| `sum_comment_count`    | Sum of `comment_count`                                          |
| `avg_duration_seconds` | Average parsed duration from ISO8601 `duration`                |
| `languages`            | Comma-separated distinct `language` values (up to 5)            |

------------------------------------------------------------------------

## Notes

- Home JSONs and candidate subfolder JSONs are **never mixed**.
- No totals rows and no per-candidate one-line CSVs.
- Candidate order follows YAML `candidate_id` order.
- Metrics are platform-specific.
